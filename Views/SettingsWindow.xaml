<Window x:Class="GoldPriceMonitor.Views.SettingsWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="设置" Height="300" Width="400"
        WindowStyle="None" AllowsTransparency="True" Background="Transparent"
        ResizeMode="NoResize" ShowInTaskbar="False" Topmost="True">
    <Window.Resources>
        <ResourceDictionary Source="/Resources/Styles.xaml" />
    </Window.Resources>

    <Grid Margin="0,0,0,0">
        <Border Background="{StaticResource WindowBackground}"
                BorderBrush="{StaticResource AccentColor}"
                BorderThickness="2"
                CornerRadius="10"
                Effect="{StaticResource DropShadow}">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="30" />
                    <RowDefinition Height="*" />
                    <RowDefinition Height="45" />
                </Grid.RowDefinitions>

                <!-- 标题栏 -->
                <Grid Grid.Row="0" Background="{StaticResource HeaderBackground}" MouseLeftButtonDown="Window_MouseLeftButtonDown">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="Auto" />
                    </Grid.ColumnDefinitions>
                    <TextBlock Grid.Column="0" Text="⚙️ 设置" Foreground="White"
                               VerticalAlignment="Center" Margin="10,0,0,0" FontWeight="Bold"/>
                    <Button Grid.Column="1" Content="✕" Width="30" Height="30"
                            Background="Transparent" Foreground="White" BorderThickness="0"
                            Click="CloseButton_Click" />
                </Grid>

                <!-- 设置内容 -->
                <Grid Grid.Row="1" Margin="20">
                    <StackPanel>
                        <!-- API Token -->
                        <TextBlock Text="iTick API Token:" Foreground="{StaticResource TextSecondary}" FontSize="12" />
                        <TextBox x:Name="ApiTokenTextBox" Text="{Binding ApiToken}"
                                 Background="{StaticResource CardBackground}" Foreground="{StaticResource TextPrimary}"
                                 BorderThickness="0" Padding="8" Margin="0,5,0,15"
                                 TextChanged="ApiTokenTextBox_TextChanged" />

                        <!-- 刷新间隔 -->
                        <TextBlock Text="刷新间隔 (秒):" Foreground="{StaticResource TextSecondary}" FontSize="12" />
                        <TextBox x:Name="RefreshIntervalTextBox" Text="5"
                                 Background="{StaticResource CardBackground}" Foreground="{StaticResource TextPrimary}"
                                 BorderThickness="0" Padding="8" Margin="0,5,0,15"
                                 TextChanged="RefreshIntervalTextBox_TextChanged" />

                        <!-- API 注册链接 -->
                        <TextBlock Margin="0,10,0,0" FontSize="10" Foreground="{StaticResource TextTertiary}">
                            <Hyperlink NavigateUri="https://www.itick.io" RequestNavigate="Hyperlink_RequestNavigate">
                                还没有API Token? 点击注册 iTick
                            </Hyperlink>
                        </TextBlock>
                    </StackPanel>
                </Grid>

                <!-- 底部按钮 -->
                <Grid Grid.Row="2" Background="{StaticResource FooterBackground}">
                    <Button Content="保存设置" Background="{StaticResource AccentColor}"
                            Foreground="White" BorderThickness="0" Padding="20,8"
                            HorizontalAlignment="Center" Click="SaveButton_Click" />
                </Grid>
            </Grid>
        </Border>
    </Grid>
</Window>
